syntax = "proto3";
package messages;

import "groupshare/messages/state.proto";
import "groupshare/messages/token.proto";
import "groupshare/messages/error.proto";

option go_package = "github.com/dave/groupshare/server/pb/groupshare/messages;messages";

message Share {
  message List {
    message Request {
      Token token = 1;
    }
    message Response {
      repeated string shares = 2;
      Error err = 3;
    }
  }

  message Get {
    message Request {
      Token token = 1;
      string id = 2;
    }
    message Response {
      string id = 1;
      int64 state = 2;
      bytes share = 3;
      Error err = 4;
    }
  }

  message Add {
    message Request {
      Token token = 1;
      string unique = 2;
      bytes share = 3;
    }
    message Response {
      string id = 1;
      string unique = 2;
      Error err = 3;
    }
  }

  message Edit {
    message Request {
      Token token = 1;
      string id = 2; // document id
      State.Request req = 3;
    }
    message Response {
      State.Response resp = 1;
      Error err = 2;
    }
  }

}